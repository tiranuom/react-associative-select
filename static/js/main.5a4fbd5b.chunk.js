(this["webpackJsonpreact-associative-select-example"]=this["webpackJsonpreact-associative-select-example"]||[]).push([[0],{292:function(e,t,n){"use strict";n.r(t);n(35);var a=n(0),r=n.n(a),i=n(6),l=n.n(i),o=n(23),u=n.n(o),c=n(32),s=n(297),m=n(296),p=n(24),d=n(25);function v(e){var t=e.title,n=e.description,i=e.code,l=e.children,o=Object(a.useState)(!1),u=Object(c.a)(o,2),v=u[0],f=u[1];return r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"row d-flex justify-content-between"},r.a.createElement("h5",{className:"col-10"},t),r.a.createElement("a",{className:"btn btn-light col-1",onClick:function(){return f(!v)}},r.a.createElement(p.a,{icon:d.faCode}))),r.a.createElement("p",null,n),r.a.createElement(m.a,{in:v},r.a.createElement("div",null,r.a.createElement(s.a,{language:"typescript",id:"code"},i))),l)}var f=n(31),g=n(3);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e){return e.properties?Object.entries(e.properties).map((function(e){var t;return{value:e[0],label:null!=(t=e[1].title)?t:"",base:!0}})):[]}var y=[{matches:function(e){return!!e.enum},toOptions:function(e){var t,n;return null!=(t=null===(n=e.enum)||void 0===n?void 0:n.map((function(e){var t;return{label:null!=(t=null===e||void 0===e?void 0:e.toString())?t:"",value:e}})))?t:[]},isValidNewOption:function(){return!1},fromValue:function(e,t){var n;return null!==(n=t.enum)&&void 0!==n&&n.includes(e)?{label:e.toString(),value:e}:void 0}},{matches:function(e){return"number"===e.type},toOptions:function(){return[]},isValidNewOption:function(e,t){var n=+t;return console.log(n),!isNaN(n)&&(!(e.maximum&&n>e.maximum)&&((!e.multipleOf||n%e.multipleOf===0)&&!(e.minimum&&n<e.minimum)))},fromValue:function(e){return{label:e.toString(),value:e}}},{matches:function(e){return"integer"===e.type},toOptions:function(){return[]},isValidNewOption:function(e,t){var n=+t;return console.log(n),!isNaN(n)&&(!(e.maximum&&n>e.maximum)&&(e.multipleOf=e.multipleOf||1,n%e.multipleOf===0&&!(e.minimum&&n<e.minimum)))},fromValue:function(e){return{label:e.toString(),value:e}}},{matches:function(e){return"string"===e.type},toOptions:function(){return[]},isValidNewOption:function(e,t){return!(e.minLength&&t.length<e.minLength)&&(!(e.maxLength&&t.length>e.maxLength)&&!(e.pattern&&!new RegExp(e.pattern).test(t)))},fromValue:function(e){return{label:e.toString(),value:e}}},{matches:function(e){return"boolean"===e.type},toOptions:function(){return[{label:"True",value:!0},{label:"False",value:!1}]},isValidNewOption:function(){return!1},fromValue:function(e,t){var n;return null!==(n=t.enum)&&void 0!==n&&n.includes(e)?{label:e.toString(),value:e}:void 0}}];function E(e,t){return[].concat(null!=t?t:[],y).find((function(t){return t.matches(e)}))}function C(e){var t=e.schema,n=e.onChange,i=e.value,l=e.typeProviders,o=e.optionMapping,u=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["schema","onChange","value","typeProviders","optionMapping"]),c=Object(a.useState)([]),s=c[0],m=c[1],p=Object(a.useState)([]),d=p[0],v=p[1];Object(a.useEffect)((function(){v(b(t))}),[]),Object(a.useEffect)((function(){Object.entries(null!=i?i:{}).forEach((function(e){var n=e[0],a=e[1];if(t.properties){var r=t.properties[n];if(r){var i=E(r,l);if(i)i.fromValue(a,r)}}}))}),[i]),Object(a.useEffect)((function(){if(n){for(var e={},a=0;a<s.length;a+=2)if(s[a+1]){var r,i,l=s[a].value.split(":")[0];if(t.properties&&"array"===(null===(r=t.properties[l])||void 0===r?void 0:r.type))e[l]=null!=(i=e[l])?i:[],e[l].push(s[a+1].value);else e[l]=s[a+1].value}n(e)}}),[s]),Object(a.useEffect)((function(){C(void 0)}),[s]);var y=Object(a.useCallback)((function(e){if(!t.properties)return!1;if(s.length%2===0)return!1;var n=s[s.length-1],a=t.properties[n.value.split(":")[0]];if(!1===a.additionalItems)return!1;var r=E(a,l);return!r||r.isValidNewOption(a,e)}),[s]),C=Object(a.useCallback)((function(e){v([]),m((function(n){return v((function(a){if(n.length%2===0)return b(t);var r=n[n.length-1].value.split(":")[0];if(o&&o[r])o[r](e).then((function(e){m((function(t){return t[t.length-1].value.split(":")[0]===r&&v(e),t}))}));else if(t.properties&&t.properties[r]&&t.properties[r].enum){var i;return(null!=(i=t.properties[r].enum)?i:[]).map((function(e){return{label:e+"",value:e+""}}))}return a.filter((function(t){return t.label.toLowerCase().startsWith(null!=e?e:"")}))})),n}))}),[]);return r.a.createElement(f.a,Object.assign({},u,{isMulti:!0,isClearable:!0,value:s.map((function(e,t){return h({},e,{index:t})})),options:d,defaultOptions:d,onInputChange:C,allowCreateWhileLoading:!1,onChange:function(e,n){var a;if("remove-value"!==n.action&&"pop-value"!==n.action||(null===(a=n.removedValue)||void 0===a?void 0:a.index)%2===0)"clear"===n.action?m(e):m(e.map((function(e,n){var a;return n%2===0&&t.properties&&"array"===(null===(a=t.properties[e.value])||void 0===a?void 0:a.type)?h({},e,{value:e.value+":"+Date.now()}):e})));else{var r,i=null===(r=n.removedValue)||void 0===r?void 0:r.index;m([].concat(e.filter((function(e){return(null===e||void 0===e?void 0:e.index)!==i-1}))))}},components:h({MultiValueRemove:function(e){return e.data.index%2===0?null:r.a.createElement(g.l.MultiValueRemove,Object.assign({},e))}},u.components),styles:h({},u.styles,{multiValue:function(e,t){var n,a,r=null===(n=u.styles)||void 0===n?void 0:n.multiValue;a=r?r(e,t):void 0;var i,l,o,c,s,m,p,d,v,f,g,b,y,E,C,O,S,R,N,w,x,j,L,V,T,A,k,M,U,W,P,F,J,B,I=t.getValue(),$=I[I.length-1];return t.data.index%2!==0?h({},e,a,{borderRadius:null!=(i=null===(l=a)||void 0===l?void 0:l.borderRadius)?i:0,margin:null!=(o=null===(c=a)||void 0===c?void 0:c.margin)?o:0,marginRight:null!=(s=null===(m=a)||void 0===m?void 0:m.marginRight)?s:5,backgroundColor:null!=(p=null===(d=a)||void 0===d?void 0:d.backgroundColor)?p:"#f5f5f5",borderStyle:null!=(v=null===(f=a)||void 0===f?void 0:f.borderStyle)?v:"solid",borderWidth:null!=(g=null===(b=a)||void 0===b?void 0:b.borderWidth)?g:1,borderColor:null!=(y=null===(E=a)||void 0===E?void 0:E.borderColor)?y:"#b3b3b3",borderLeftWidth:null!=(C=null===(O=a)||void 0===O?void 0:O.borderLeftWidth)?C:0,borderBottomLeftRadius:0,borderTopLeftRadius:0}):h({},e,a,{borderRadius:null!=(S=null===(R=a)||void 0===R?void 0:R.borderRadius)?S:0,margin:null!=(N=null===(w=a)||void 0===w?void 0:w.margin)?N:0,marginLeft:null!=(x=null===(j=a)||void 0===j?void 0:j.marginLeft)?x:5,backgroundColor:null!=(L=null===(V=a)||void 0===V?void 0:V.backgroundColor)?L:"#dbdbdb",borderStyle:null!=(T=null===(A=a)||void 0===A?void 0:A.borderStyle)?T:"solid",borderWidth:null!=(k=null===(M=a)||void 0===M?void 0:M.borderWidth)?k:1,borderColor:null!=(U=null===(W=a)||void 0===W?void 0:W.borderColor)?U:"#b3b3b3",paddingRight:null!=(P=null===(F=a)||void 0===F?void 0:F.paddingRight)?P:5,borderBottomRightRadius:0,borderTopRightRadius:0},$.label===t.data.label?{}:{borderRightWidth:null!=(J=null===(B=a)||void 0===B?void 0:B.borderRightWidth)?J:0})}}),isValidNewOption:y,onCreateOption:function(e){return m((function(t){return[].concat(t,[{label:e,value:e}])}))},formatCreateLabel:function(e){return r.a.createElement("div",null,e)}}))}var O={type:"object",title:"",properties:{name:{type:"string",title:"Name",pattern:"^[a-zA-Z ]+$"},age:{type:"number",title:"Age",minimum:18,maximum:60,multipleOf:1},gender:{type:"string",title:"Gender",enum:["Male","Female"]}}};function S(){return r.a.createElement(C,{schema:O,value:{},onChange:function(e){console.log(e)},styles:{multiValue:function(){return{borderRadius:10}}}})}var R=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Basic usage is simple as defining the schema and adding the ",r.a.createElement("code",null,"AssociativeSelect")," component with callback.")),N={type:"object",title:"",properties:{currencyCode:{type:"string",title:"Currency"}}};function w(){return r.a.createElement("div",null,r.a.createElement(C,{schema:N,onChange:function(e){console.log(e)},optionMapping:{currencyCode:function(e){return new Promise((function(t){setTimeout((function(){t([{label:"LKR",value:"Rs. "},{label:"USD",value:"$"},{label:"EURO",value:"\u20ac"}].filter((function(t){var n=t.label;return!e||n.toLowerCase().startsWith(e.toLowerCase())})))}),1e3)}))}}}))}var x=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("code",null,"react-associative-select")," supports asynchronous data fetching through optionMapping prop."),r.a.createElement("p",null,"The option mapping is a key-value pair object where the key is a key of schema properties and the value is a function which provides a promise of results. The result is in ",r.a.createElement("code",null,"{label: string, value: T}")," shape.")),j={type:"object",title:"",properties:{supportedCurrencies:{type:"array",title:"Currency",items:{type:"string"},enum:["USD","LKR","EURO"]}}};function L(){return r.a.createElement("div",null,r.a.createElement(C,{schema:j,onChange:function(e){console.log(e)}}))}var V=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The properties of type ",r.a.createElement("code",null,"array")," are automatically converted to multi-value field.")),T={type:"object",title:"",properties:{currencyCode:{type:"string",title:"Currency",additionalItems:!1}}};function A(){return r.a.createElement("div",null,r.a.createElement(C,{schema:T,onChange:function(e){console.log(e)},optionMapping:{currencyCode:function(e){return new Promise((function(t){setTimeout((function(){t([{label:"LKR",value:"Rs. "},{label:"USD",value:"$"},{label:"EURO",value:"\u20ac"}].filter((function(t){var n=t.label;return!e||n.toLowerCase().startsWith(e.toLowerCase())})))}),1e3)}))}}}))}var k=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"By default, arbitrary values are supported in the defined fields except for the fields with enum property. This behavior can be changed by using ",r.a.createElement("code",null,"additionalItems")," json-schema property."),r.a.createElement("p",null,"Arbitrary value support control works well with asynchronous data fetching."));var M=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light sticky-top"},r.a.createElement("a",{className:"navbar-brand mx-3",href:"#"},"React associative select")),r.a.createElement("div",{className:"container row mt-5 mp-5"},r.a.createElement("div",{className:"col-md-2 position-fixed"},r.a.createElement(u.a,{items:["basic-usage"],currentClassName:"active",className:"list-group"},r.a.createElement("a",{className:"list-group-item list-group-item-action",href:"#intro"},"Introduction"),r.a.createElement("a",{className:"list-group-item list-group-item-action",href:"#basic-usage"},"Basic Usage"),r.a.createElement("a",{className:"list-group-item list-group-item-action",href:"#async-usage"},"Async Usage"),r.a.createElement("a",{className:"list-group-item list-group-item-action",href:"#multi-value-support-usage"},"Multi Value Support"),r.a.createElement("a",{className:"list-group-item list-group-item-action",href:"#arbitrary-value-support-usage"},"Arbitrary Value Support"))),r.a.createElement("div",{className:"col-md-8 offset-4"},r.a.createElement("section",{id:"intro"},r.a.createElement("h3",null,"React Associative Select"),r.a.createElement("p",null,r.a.createElement("code",null,"React-associative-search")," uses ",r.a.createElement("a",{href:"https://react-select.com"},"React Select")," under the hood to provide the select functionality. Kudos for the authors of the great tool."),r.a.createElement("p",null,"Furthermore, the library uses `JSONSchema7` schema format to define the shape of search options. Full JSONSchema7 spec is not supported and the project is in active development to support additional features.")),r.a.createElement("section",{id:"installation"},r.a.createElement("h5",null,"Installation"),r.a.createElement("p",null,"The easiest way to install the react-associative-select is through npm or yarn."),r.a.createElement(s.a,{language:"shell"},"$ npm -i react-associative-select"),r.a.createElement("p",null,"or"),r.a.createElement(s.a,{language:"shell"},"$ yarn add react-associative-select")),r.a.createElement("section",{id:"basic-usage"},r.a.createElement(v,{title:"Basic Usage",description:R,code:'\nimport React from \'react\'\n\nimport { AssociativeSelect } from \'react-associative-select\'\nimport {JSONSchema7} from "json-schema";\n\ninterface Person {\n  name: string\n  age: number\n  gender: "Male" | "Female"\n}\n\nconst schema: JSONSchema7 = {\n  type: "object",\n  title: "",\n  properties: {\n    "name": { type: "string", title: "Name", pattern: \'^[a-zA-Z ]+$\' },\n    "age": { type: "number", title: "Age", minimum: 18, maximum: 60, multipleOf: 1 },\n    "gender": { type: "string", title: "Gender", enum: ["Male", "Female"] }\n  }\n}\n\nexport default function BasicExample() {\n\n  function onChange(values: Partial<Person>) {\n    console.log(values)\n  }\n\n  return <AssociativeSelect\n    schema={schema}\n    value={{}}\n    onChange={onChange}\n    styles={{\n      multiValue() {\n        return {\n          borderRadius: 10\n        }\n      }\n    }}\n  />\n}\n'},r.a.createElement(S,null))),r.a.createElement("section",{id:"async-usage"},r.a.createElement(v,{title:"Asynchronous options fetching",description:x,code:'\nimport React from "react";\nimport {AssociativeSelect, OptionType} from "react-associative-select";\nimport {JSONSchema7} from "json-schema";\nimport {OptionsType} from "react-select";\n\ninterface CurrencySelection {\n  currencyCode: string\n}\n\nconst schema: JSONSchema7 = {\n  type: "object",\n  title: "",\n  properties: {\n    "currencyCode": {type: "string", title: "Currency"}\n  }\n}\n\nexport function AsyncOptionFetchingExample() {\n\n  function onQueryChange(e: Partial<CurrencySelection>) {\n    console.log(e)\n  }\n\n  return <div>\n    <AssociativeSelect\n      schema={schema}\n      onChange={onQueryChange}\n      optionMapping={{\n        currencyCode: (text: string | undefined) => new Promise<OptionsType<OptionType<string>>>((resolve) => {\n          setTimeout(() => {\n            let currencies: OptionsType<OptionType<string>> = [{label: "LKR", value: "Rs. "}, {label: "USD", value: "$"}, {label: "EURO", value: "\u20ac"}];\n            resolve(currencies.filter(({label}) => !text || label.toLowerCase().startsWith(text.toLowerCase())));\n          }, 1000)\n        })\n      }}\n    />\n  </div>\n}\n'},r.a.createElement(w,null))),r.a.createElement("section",{id:"multi-value-support-usage"},r.a.createElement(v,{title:"Multi Value Support",description:V,code:'\nimport React from "react";\nimport {AssociativeSelect} from "react-associative-select";\nimport {JSONSchema7} from "json-schema";\n\ninterface CurrencySelection {\n  supportedCurrencies: string[]\n}\n\nconst schema: JSONSchema7 = {\n  type: "object",\n  title: "",\n  properties: {\n    "supportedCurrencies": {type: "array", title: "Currency", items: {type: "string"}, enum: ["USD", "LKR", "EURO"]}\n  }\n}\n\nexport function MultiValueSupport() {\n\n  function onQueryChange(e: Partial<CurrencySelection>) {\n    console.log(e)\n  }\n\n  return <div>\n    <AssociativeSelect\n      schema={schema}\n      onChange={onQueryChange}\n    />\n  </div>\n}\n'},r.a.createElement(L,null))),r.a.createElement("section",{id:"arbitrary-value-support-usage"},r.a.createElement(v,{title:"Arbitrary Support",description:k,code:'\nimport React from "react";\nimport {AssociativeSelect, OptionType} from "react-associative-select";\nimport {JSONSchema7} from "json-schema";\nimport {OptionsType} from "react-select";\n\ninterface CurrencySelection {\n  currencyCode: string\n}\n\nconst schema: JSONSchema7 = {\n  type: "object",\n  title: "",\n  properties: {\n    "currencyCode": {type: "string", title: "Currency", additionalItems: false}\n  }\n}\n\nexport function ArbitraryValueExample() {\n\n  function onQueryChange(e: Partial<CurrencySelection>) {\n    console.log(e)\n  }\n\n  return <div>\n    <AssociativeSelect\n      schema={schema}\n      onChange={onQueryChange}\n      optionMapping={{\n        currencyCode: (text: string | undefined) => new Promise<OptionsType<OptionType<string>>>((resolve) => {\n          setTimeout(() => {\n            let currencies: OptionsType<OptionType<string>> = [{label: "LKR", value: "Rs. "}, {label: "USD", value: "$"}, {label: "EURO", value: "\u20ac"}];\n            resolve(currencies.filter(({label}) => !text || label.toLowerCase().startsWith(text.toLowerCase())));\n          }, 1000)\n        })\n      }}\n    />\n  </div>\n}'},r.a.createElement(A,null))))))};n(291);l.a.render(r.a.createElement(M,null),document.getElementById("root"))},34:function(e,t,n){e.exports=n(292)},35:function(e,t,n){}},[[34,1,2]]]);
//# sourceMappingURL=main.5a4fbd5b.chunk.js.map